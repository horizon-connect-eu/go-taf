import{_ as W}from"./TrustGraph.vue_vue_type_script_setup_true_lang-DdKKzQPd.js";import{_ as j,V as A,R as M,a as D}from"./index-B0FZASXe.js";import{d as O,r as h,u as P,c as I,a as u,b as _,e as d,w as n,V as q,T as H,g as w,f,F as c,n as E,p as G,o as i,h as J,q as V,l as z,t as a,i as t,k as g,s as C}from"./index-BEe3quP2.js";const K={class:"mt-1"},Q={class:"text-overline mt-n2"},X={key:0},Y={key:1},Z={class:"text-overline mt-n2"},tt={style:{"min-height":"500px","min-width":"500px",height:"100%"}},nt=O({__name:"index",setup(et){const k=h([]),y=h([]),L=h(null),o=E(),R=P(),$=[{maxWidth:"100px",filterable:!0,title:"Version",key:"version"},{filterable:!0,maxWidth:"300px",title:"Updates",key:"updates"},{filterable:!1,title:"Graph",key:"graph"},{filterable:!1,maxWidth:"350px",title:"State",key:"state"},{maxWidth:"350px",filterable:!1,title:"ATLs",key:"atls"}],S=I(()=>R.trustModelInstances[`//${o.params.client}/${o.params.sessionID}/${o.params.template}/${o.params.id}`]),N=I(()=>Object.entries(S.value.states||{}).map(([x,s])=>{var b,p,e,r;return{version:x,updates:(e=(p=(b=S.value.updates)==null?void 0:b[x])==null?void 0:p.map)==null?void 0:e.call(p,m=>JSON.stringify(m,null,2)),atls:(r=S.value.atls)==null?void 0:r[x],state:s}})),F=h(document.body.clientHeight-48);function U(){F.value=document.body.clientHeight-48}async function T(){try{await R.fetchTrustModelInstance(o.params.client,o.params.sessionID,o.params.template,o.params.id)}catch{G.push("/")}}return T(),(x,s)=>{const b=j,p=W;return i(),u(c,null,[(i(),_(H,{to:"#toolbar"},[d(b,{modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=e=>k.value=e),columns:$,items:N.value,"sync-to-query":"","sort-by":y.value,"onUpdate:sortBy":s[1]||(s[1]=e=>y.value=e),defaults:{sort:"-version"}},null,8,["modelValue","items","sort-by"]),d(q,{icon:"",title:"Refresh",size:"small",onClick:T,variant:"text"},{default:n(()=>[d(J,{icon:"mdi-reload"})]),_:1})])),w((i(),_(f(A),{headers:$,items:k.value,height:F.value,"sort-by":y.value,"onUpdate:sortBy":s[2]||(s[2]=e=>y.value=e),ref_key:"table",ref:L},{"item.version":n(({item:e})=>[d(z,{class:"pr-0 mt-1",to:`/tmis/${f(o).params.client}/${f(o).params.sessionID}/${f(o).params.template}/${f(o).params.id}/${e.version}`},{default:n(()=>[s[3]||(s[3]=V(" Version ")),d(z,{class:"ml-1 font-weight-bold"},{default:n(()=>[V(a(e.version),1)]),_:2},1024)]),_:2},1032,["to"])]),"item.updates":n(({item:e})=>[t("ul",K,[(i(!0),u(c,null,g(e.updates,(r,m)=>(i(),u("li",{key:m},[t("pre",null,a(r),1)]))),128))])]),"item.atls":n(({item:e})=>{var r;return[(i(!0),u(c,null,g((r=e.atls)==null?void 0:r.SlResults,(m,l)=>(i(),_(C,{variant:"outlined",class:"mx-2 my-1",key:l},{title:n(()=>[t("div",Q,[s[4]||(s[4]=V("ATL Scope: ")),t("code",null,a(l),1)])]),default:n(()=>[d(D,{density:"compact",class:"mt-n4"},{default:n(()=>{var v,B;return[t("tbody",null,[t("tr",null,[s[5]||(s[5]=t("th",{class:"text-left"},"Subjective Logic",-1)),((v=e.atls.SlResults[l])==null?void 0:v.belief)!==void 0?(i(),u("td",X,[t("code",null,"("+a((B=e.atls.SlResults[l].belief)==null?void 0:B.toFixed(2))+" / "+a(e.atls.SlResults[l].disbelief.toFixed(2))+" / "+a(e.atls.SlResults[l].uncertainty.toFixed(2))+" / "+a(e.atls.SlResults[l].base_rate.toFixed(2))+")",1)])):(i(),u("td",Y,[t("code",null,a(e.atls.SlResults[l]),1)]))]),t("tr",null,[s[6]||(s[6]=t("th",{class:"text-left"},"Projected Probability",-1)),t("td",null,[t("code",null,a(e.atls.PpResults[l]),1)])]),t("tr",null,[s[7]||(s[7]=t("th",{class:"text-left"},"Trust Decision",-1)),t("td",null,[t("code",null,a(e.atls.TdResults[l]),1)])])])]}),_:2},1024)]),_:2},1024))),128))]}),"item.state":n(({item:e})=>[(i(!0),u(c,null,g(e.state.Values,(r,m)=>(i(),_(C,{variant:"outlined",class:"mx-2 my-1",key:m},{title:n(()=>[t("div",Z,[s[8]||(s[8]=V("Scope: ")),t("code",null,a(m),1)])]),default:n(()=>[d(D,{density:"compact",class:"mt-n4"},{default:n(()=>[s[9]||(s[9]=t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Source"),t("th",{class:"text-left"},"Destination"),t("th",{class:"text-left"},"Opinion")])],-1)),t("tbody",null,[(i(!0),u(c,null,g(r,(l,v)=>(i(),u("tr",{key:v},[t("td",null,a(l.source),1),t("td",null,a(l.destination),1),t("td",null,[t("code",null,"("+a(l.opinion.belief.toFixed(2))+" / "+a(l.opinion.disbelief.toFixed(2))+" / "+a(l.opinion.uncertainty.toFixed(2))+" / "+a(l.opinion.base_rate.toFixed(2))+")",1)])]))),128))])]),_:2},1024)]),_:2},1024))),128))]),"item.graph":n(({item:e})=>[t("div",tt,[d(p,{state:e.state,"zoom-enabled":!1,"pan-enabled":!1,"zoom-level":2.5},null,8,["state"])])]),_:2},1032,["items","height","sort-by"])),[[M,U]])],64)}}});export{nt as default};
